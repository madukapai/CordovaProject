<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta charset="utf-8" />

    <!--
        視需要在下方的中繼標籤中自訂內容安全性原則。將 'unsafe-inline' 加入 default-src 以啟用內嵌 JavaScript。
        如需詳細資料，請參閱 http://go.microsoft.com/fwlink/?LinkID=617521
    -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *">
    <title>CordovaProject</title>

    <!-- CordovaProject 參考 -->
    <link href="css/index.css" rel="stylesheet" />
</head>
<body>
    <!-- Cordova 參考，建置後會加入您的應用程式。 -->
    <script src="cordova.js"></script>
    <script src="scripts/platformOverrides.js"></script>

    <p>
        <input type="button" value="開始錄影" onclick="javascript:funStartCaptureVideo();" />
        <span id="spanPath"></span>
    </p>

    <script language="javascript">
        function funStartCaptureVideo()
        {
            // 簡潔的寫法
            navigator.device.capture.captureVideo(funCaptureSuccess, funCaptureFail, { quality: 30, limit: 1, targetWidth: 200, targetHeight: 200 });

            // 定義captureVideo.Option的寫法
            //var options = { limit: 3, quality: 30, targetWidth: 200, targetHeight: 200 };
            //navigator.device.capture.captureVideo(funCaptureSuccess, funCaptureFail, options);
        }

        function funCaptureSuccess(media)
        {
            var i, path, len;
            for (i = 0, len = media.length; i < len; i += 1)
            {
                path = media[i].fullPath;
                // path 是錄影檔所在的完整路徑
                alert("已完成錄影，檔案路徑為：" + path);
                document.getElementById("spanPath").innerHTML = path;
            }
        }

        function funCaptureFail(error)
        {
            alert("錄影發生錯誤，錯誤代碼:" + error.code);
        }
    </script>
    
</body>
</html>